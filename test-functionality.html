<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Functionality Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-result { padding: 10px; margin: 5px 0; border-radius: 4px; }
        .pass { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .fail { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    </style>
</head>
<body>
    <h1>Attendance Tracker - Functionality Test</h1>
    <div id="results"></div>

    <script>
        function runTests() {
            const results = [];
            
            // Test 1: Check if main index.html loads without errors
            try {
                // Simulate loading the main page
                const iframe = document.createElement('iframe');
                iframe.src = './index.html';
                iframe.style.display = 'none';
                document.body.appendChild(iframe);
                
                iframe.onload = function() {
                    results.push({ test: 'Main page loads', status: 'pass' });
                    displayResults(results);
                };
                
                iframe.onerror = function() {
                    results.push({ test: 'Main page loads', status: 'fail', error: 'Failed to load' });
                    displayResults(results);
                };
                
            } catch (error) {
                results.push({ test: 'Main page loads', status: 'fail', error: error.message });
            }
            
            // Test 2: Check external dependencies
            const dependencies = [
                'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css',
                'https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js',
                'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js'
            ];
            
            dependencies.forEach(dep => {
                const link = document.createElement(dep.endsWith('.css') ? 'link' : 'script');
                
                if (dep.endsWith('.css')) {
                    link.rel = 'stylesheet';
                    link.href = dep;
                } else {
                    link.src = dep;
                }
                
                link.onload = function() {
                    results.push({ test: `Dependency: ${dep.split('/').pop()}`, status: 'pass' });
                    displayResults(results);
                };
                
                link.onerror = function() {
                    results.push({ test: `Dependency: ${dep.split('/').pop()}`, status: 'fail', error: 'Failed to load' });
                    displayResults(results);
                };
                
                document.head.appendChild(link);
            });
        }
        
        function displayResults(results) {
            const container = document.getElementById('results');
            container.innerHTML = '';
            
            results.forEach(result => {
                const div = document.createElement('div');
                div.className = `test-result ${result.status}`;
                div.innerHTML = `
                    <strong>${result.test}:</strong> ${result.status.toUpperCase()}
                    ${result.error ? ` - ${result.error}` : ''}
                `;
                container.appendChild(div);
            });
        }
        
        // Run tests when page loads
        window.onload = runTests;
    </script>
</body>
</html>
